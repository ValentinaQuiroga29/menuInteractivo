<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Men√∫ Interactivo - Secci√≥n 2: Funcionalidades</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        h1 {
            color: #2E3B55;
            text-align: center;
            border-bottom: 3px solid #E53E3E;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #2E3B55;
            border-left: 4px solid #E53E3E;
            padding-left: 15px;
            margin-top: 30px;
        }
        h3 {
            color: #4A5568;
            margin-top: 25px;
        }
        .highlight {
            background-color: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #38A169;
            margin: 15px 0;
            border-radius: 5px;
        }
        .use-case {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #38A169;
        }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            background: #f0f8ff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3182CE;
        }
        .feature-list li:before {
            content: "‚úÖ ";
            font-weight: bold;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .panel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .panel-card {
            background: white;
            border: 2px solid #E53E3E;
            border-radius: 8px;
            padding: 20px;
        }
        .panel-card h4 {
            color: #E53E3E;
            margin: 0 0 15px 0;
            text-align: center;
        }
        .status-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .status-step {
            text-align: center;
            flex: 1;
        }
        .status-step .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .page-break {
            page-break-before: always;
        }
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçΩÔ∏è Sistema de Men√∫ Interactivo</h1>
        <h2>Secci√≥n 2: Funcionalidades y Casos de Uso</h2>

        <h2>üìã Requerimientos del Sistema</h2>
        
        <h3>Requerimientos Funcionales</h3>
        
        <h4>RF1 - Gesti√≥n de Usuarios</h4>
        <ul class="feature-list">
            <li>Sistema de autenticaci√≥n por roles</li>
            <li>Registro de usuarios (cliente, mesero, cocinero, administrador)</li>
            <li>Control de acceso a diferentes paneles</li>
            <li>Gesti√≥n de perfiles de usuario</li>
        </ul>

        <h4>RF2 - Gesti√≥n de Platillos</h4>
        <ul class="feature-list">
            <li>CRUD completo de platillos</li>
            <li>Categorizaci√≥n de platillos</li>
            <li>Gesti√≥n de im√°genes</li>
            <li>Control de disponibilidad</li>
            <li>B√∫squeda y filtrado</li>
        </ul>

        <h4>RF3 - Sistema de Pedidos</h4>
        <ul class="feature-list">
            <li>Creaci√≥n de pedidos</li>
            <li>Flujo de estados (pendiente ‚Üí pagado ‚Üí en preparaci√≥n ‚Üí listo ‚Üí entregado)</li>
            <li>Gesti√≥n de detalles de pedido</li>
            <li>C√°lculo autom√°tico de totales</li>
            <li>Historial de pedidos</li>
        </ul>

        <h4>RF4 - Carrito de Compras</h4>
        <ul class="feature-list">
            <li>Agregar/quitar productos</li>
            <li>Control de cantidades</li>
            <li>Persistencia durante la sesi√≥n</li>
            <li>C√°lculo de totales</li>
            <li>Vaciar carrito</li>
        </ul>

        <h4>RF5 - Paneles Especializados</h4>
        <ul class="feature-list">
            <li>Panel de Administraci√≥n (gesti√≥n completa)</li>
            <li>Panel de Mesero (gesti√≥n de pedidos y pagos)</li>
            <li>Panel de Cocina (preparaci√≥n de pedidos)</li>
            <li>Dashboard con estad√≠sticas</li>
        </ul>

        <h3>Requerimientos No Funcionales</h3>
        
        <h4>RNF1 - Rendimiento</h4>
        <ul class="feature-list">
            <li>Respuesta r√°pida de la API (< 2 segundos)</li>
            <li>Interfaz responsiva para diferentes dispositivos</li>
            <li>Optimizaci√≥n de consultas a base de datos</li>
        </ul>

        <h4>RNF2 - Seguridad</h4>
        <ul class="feature-list">
            <li>Validaci√≥n de datos en frontend y backend</li>
            <li>Control de acceso por roles</li>
            <li>Sanitizaci√≥n de entradas</li>
            <li>Configuraci√≥n de CORS</li>
        </ul>

        <h4>RNF3 - Usabilidad</h4>
        <ul class="feature-list">
            <li>Interfaz intuitiva y moderna</li>
            <li>Navegaci√≥n clara</li>
            <li>Feedback visual para acciones</li>
            <li>Dise√±o responsivo</li>
        </ul>

        <h2>üìù Casos de Uso</h2>

        <div class="use-case">
            <h3>CU1 - Cliente hace pedido</h3>
            <p><strong>Actor:</strong> Cliente</p>
            <p><strong>Precondici√≥n:</strong> Cliente accede al men√∫</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Cliente navega al men√∫</li>
                <li>Cliente selecciona platillos</li>
                <li>Cliente agrega al carrito</li>
                <li>Cliente confirma pedido</li>
                <li>Sistema crea pedido</li>
            </ol>
            <p><strong>Postcondici√≥n:</strong> Pedido creado en estado "pendiente"</p>
        </div>

        <div class="use-case">
            <h3>CU2 - Mesero gestiona pedido</h3>
            <p><strong>Actor:</strong> Mesero</p>
            <p><strong>Precondici√≥n:</strong> Existe pedido pendiente</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Mesero ve pedidos pendientes</li>
                <li>Mesero registra pago</li>
                <li>Mesero env√≠a a cocina</li>
                <li>Mesero entrega pedido</li>
            </ol>
            <p><strong>Postcondici√≥n:</strong> Pedido marcado como "entregado"</p>
        </div>

        <div class="use-case">
            <h3>CU3 - Cocinero prepara pedido</h3>
            <p><strong>Actor:</strong> Cocinero</p>
            <p><strong>Precondici√≥n:</strong> Pedido en estado "en preparaci√≥n"</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Cocinero ve pedidos pendientes</li>
                <li>Cocinero prepara platillos</li>
                <li>Cocinero marca como listo</li>
            </ol>
            <p><strong>Postcondici√≥n:</strong> Pedido marcado como "listo"</p>
        </div>

        <div class="use-case">
            <h3>CU4 - Administrador gestiona sistema</h3>
            <p><strong>Actor:</strong> Administrador</p>
            <p><strong>Precondici√≥n:</strong> Usuario autenticado como administrador</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Administrador accede al panel</li>
                <li>Administrador gestiona platillos/usuarios/categor√≠as</li>
                <li>Administrador ve estad√≠sticas</li>
            </ol>
            <p><strong>Postcondici√≥n:</strong> Cambios aplicados al sistema</p>
        </div>

        <h2>üçΩÔ∏è Funcionalidades Implementadas</h2>

        <h3>Gesti√≥n de Platillos</h3>
        <div class="highlight">
            <h4>Caracter√≠sticas de TarjetaPlatillo.jsx (104 l√≠neas)</h4>
            <ul>
                <li>‚úÖ Imagen con fallback a √≠cono</li>
                <li>‚úÖ Informaci√≥n completa (nombre, precio, descripci√≥n)</li>
                <li>‚úÖ Animaci√≥n de entrada con Framer Motion</li>
                <li>‚úÖ Efecto hover con transformaci√≥n</li>
                <li>‚úÖ Bot√≥n de agregar al carrito</li>
                <li>‚úÖ Manejo de errores de imagen</li>
                <li>‚úÖ Tooltip informativo</li>
            </ul>
        </div>

        <h4>Operaciones CRUD Completas</h4>
        <ul class="feature-list">
            <li><strong>CREATE:</strong> Agregar nuevos platillos con imagen</li>
            <li><strong>READ:</strong> Listar todos los platillos por categor√≠a</li>
            <li><strong>UPDATE:</strong> Editar informaci√≥n existente</li>
            <li><strong>DELETE:</strong> Eliminar platillos del sistema</li>
        </ul>

        <h3>üõí Sistema de Carrito (CarritoContext.jsx - 81 l√≠neas)</h3>
        <div class="highlight">
            <h4>Funcionalidades Avanzadas</h4>
            <ul>
                <li>‚úÖ Estado global con Context API</li>
                <li>‚úÖ Agregar/quitar items</li>
                <li>‚úÖ Control de cantidades</li>
                <li>‚úÖ C√°lculo autom√°tico de totales</li>
                <li>‚úÖ Persistencia durante la sesi√≥n</li>
                <li>‚úÖ Validaci√≥n de precios</li>
                <li>‚úÖ Logs detallados para debugging</li>
            </ul>
        </div>

        <h4>Flujo de Compra</h4>
        <ol>
            <li><strong>Selecci√≥n:</strong> Cliente agrega platillos al carrito</li>
            <li><strong>Revisi√≥n:</strong> Ve el resumen en p√°gina de carrito</li>
            <li><strong>Confirmaci√≥n:</strong> Env√≠a pedido al backend</li>
            <li><strong>Procesamiento:</strong> Sistema crea pedido en base de datos</li>
            <li><strong>Notificaci√≥n:</strong> Confirma recepci√≥n del pedido</li>
        </ol>

        <h3>üìã Sistema de Pedidos (pedido_controlador.py - 123 l√≠neas)</h3>
        
        <h4>Estados del Pedido</h4>
        <div class="status-flow">
            <div class="status-step">
                <div class="icon">üîÑ</div>
                <div>pendiente</div>
            </div>
            <div class="status-step">
                <div class="icon">üí≥</div>
                <div>pagado</div>
            </div>
            <div class="status-step">
                <div class="icon">üë®‚Äçüç≥</div>
                <div>en preparaci√≥n</div>
            </div>
            <div class="status-step">
                <div class="icon">‚úÖ</div>
                <div>listo</div>
            </div>
            <div class="status-step">
                <div class="icon">üéØ</div>
                <div>entregado</div>
            </div>
        </div>

        <h4>Endpoints Implementados</h4>
        <div class="code-block">
GET /pedidos/ - Listar todos los pedidos
GET /pedidos/pendientes - Pedidos por procesar
GET /pedidos/en-preparacion - Pedidos en cocina
PATCH /pedidos/{id}/estado - Cambiar estado
POST /pedidos/nuevo_pedido - Crear nuevo pedido
POST /pedidos/transacciones - Registrar pago
        </div>

        <h2>üë• Sistema de Roles y Paneles</h2>

        <div class="panel-grid">
            <div class="panel-card">
                <h4>üë®‚Äçüíª Panel de Administraci√≥n (537 l√≠neas)</h4>
                <ul>
                    <li>‚úÖ Gesti√≥n completa de platillos</li>
                    <li>‚úÖ Gesti√≥n de usuarios y roles</li>
                    <li>‚úÖ Gesti√≥n de categor√≠as</li>
                    <li>‚úÖ Visualizaci√≥n de estad√≠sticas</li>
                    <li>‚úÖ Subida de im√°genes</li>
                    <li>‚úÖ Validaci√≥n de formularios</li>
                    <li>‚úÖ Modales de confirmaci√≥n</li>
                </ul>
            </div>

            <div class="panel-card">
                <h4>üë®‚Äçüíº Panel de Mesero (286 l√≠neas)</h4>
                <ul>
                    <li>‚úÖ Ver pedidos pendientes</li>
                    <li>‚úÖ Registrar pagos</li>
                    <li>‚úÖ Cambiar estados de pedidos</li>
                    <li>‚úÖ Gestionar entregas</li>
                    <li>‚úÖ Comunicaci√≥n con cocina</li>
                </ul>
            </div>

            <div class="panel-card">
                <h4>üë®‚Äçüç≥ Panel de Cocina (173 l√≠neas)</h4>
                <ul>
                    <li>‚úÖ Ver pedidos en preparaci√≥n</li>
                    <li>‚úÖ Marcar platillos como listos</li>
                    <li>‚úÖ Ver detalles de preparaci√≥n</li>
                    <li>‚úÖ Gesti√≥n de prioridades</li>
                </ul>
            </div>
        </div>

        <div class="page-break"></div>

        <h2>üìä Diagramas del Sistema</h2>

        <h3>Diagrama de Clases</h3>

        <h4>Clase Usuario</h4>
        <div class="code-block">
class Usuario:
    - id_usuario: int
    - nombre: string
    - correo: string
    - contrase√±a: string
    - rol: enum
    + autenticar()
    + cambiar_rol()
        </div>

        <h4>Clase Platillo</h4>
        <div class="code-block">
class Platillo:
    - id_platillo: int
    - nombre: string
    - descripcion: text
    - precio: decimal
    - imagen: string
    - estado: enum
    - id_categoria: int
    + cambiar_estado()
    + actualizar_precio()
        </div>

        <h4>Clase Pedido</h4>
        <div class="code-block">
class Pedido:
    - id_pedido: int
    - id_cliente: int
    - id_mesero: int
    - estado: enum
    - fecha_hora: datetime
    + cambiar_estado()
    + calcular_total()
        </div>

        <h4>Clase DetallePedido</h4>
        <div class="code-block">
class DetallePedido:
    - id_detalle: int
    - id_pedido: int
    - id_platillo: int
    - cantidad: int
    - precio_unitario: decimal
    + calcular_subtotal()
        </div>

        <h3>Diagrama de Paquetes</h3>
        <div class="flow-diagram">
menu_interactivo/
‚îú‚îÄ‚îÄ üì¶ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ componentes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ paginas/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üì¶ contexto/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ üì¶ public/
‚îú‚îÄ‚îÄ üì¶ backend/
‚îÇ   ‚îú‚îÄ‚îÄ controladores/
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ modelos/
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ üì¶ __pycache__/
‚îî‚îÄ‚îÄ docs/
        </div>

        <h3>Diagrama de Componentes</h3>

        <h4>Frontend Components:</h4>
        <ul class="feature-list">
            <li><strong>App.jsx:</strong> Componente ra√≠z con enrutamiento</li>
            <li><strong>Plantilla.jsx:</strong> Layout principal</li>
            <li><strong>TarjetaPlatillo.jsx:</strong> Visualizaci√≥n de platillos</li>
            <li><strong>CarritoContext.jsx:</strong> Estado global del carrito</li>
            <li><strong>RutaProtegida.jsx:</strong> Control de acceso</li>
        </ul>

        <h4>Backend Components:</h4>
        <ul class="feature-list">
            <li><strong>app.py:</strong> Servidor principal Flask</li>
            <li><strong>controladores/:</strong> L√≥gica de negocio</li>
            <li><strong>modelos/:</strong> Acceso a datos</li>
            <li><strong>conexion.py:</strong> Configuraci√≥n de BD</li>
        </ul>

        <h2>üîí Seguridad y Validaciones</h2>

        <h3>Medidas de Seguridad Implementadas</h3>

        <h4>Autenticaci√≥n y Autorizaci√≥n</h4>
        <div class="code-block">
// RutaProtegida.jsx - Control de acceso
const RutaProtegida = ({ rolPermitido, children }) => {
  const rol = localStorage.getItem('rol');
  return rol === rolPermitido ? children : <Navigate to="/login" />;
};
        </div>

        <h4>Validaci√≥n de Datos</h4>
        <div class="code-block">
# Backend - Validaci√≥n de entrada
def crear_platillo():
    nombre = request.form.get('nombre')
    if not nombre:
        return jsonify({"error": "Nombre requerido"}), 400
        </div>

        <h4>CORS Configurado</h4>
        <div class="code-block">
# app.py - Configuraci√≥n de seguridad
CORS(app, 
     origins=["http://localhost:5173"],
     methods=["GET", "POST", "PUT", "DELETE"],
     allow_headers=["Content-Type", "Authorization"])
        </div>

        <h3>Validaciones Implementadas</h3>

        <h4>Frontend</h4>
        <ul class="feature-list">
            <li>‚úÖ Validaci√≥n de formularios</li>
            <li>‚úÖ Control de tipos de datos</li>
            <li>‚úÖ Manejo de errores de red</li>
            <li>‚úÖ Validaci√≥n de archivos de imagen</li>
        </ul>

        <h4>Backend</h4>
        <ul class="feature-list">
            <li>‚úÖ Validaci√≥n de datos de entrada</li>
            <li>‚úÖ Sanitizaci√≥n de strings</li>
            <li>‚úÖ Verificaci√≥n de permisos</li>
            <li>‚úÖ Manejo de excepciones</li>
        </ul>

        <div class="highlight">
            <h3>üìã Resumen de la Secci√≥n 2</h3>
            <p>Esta secci√≥n detalla las funcionalidades implementadas, casos de uso del sistema, diagramas de clases y componentes, as√≠ como las medidas de seguridad implementadas. El sistema cuenta con un flujo completo de pedidos, gesti√≥n de roles especializada y validaciones robustas tanto en frontend como backend.</p>
        </div>
    </div>
</body>
</html> 