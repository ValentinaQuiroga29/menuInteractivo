<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de MenÃº Interactivo - SecciÃ³n 2: Funcionalidades</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        h1 {
            color: #2E3B55;
            text-align: center;
            border-bottom: 3px solid #E53E3E;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #2E3B55;
            border-left: 4px solid #E53E3E;
            padding-left: 15px;
            margin-top: 30px;
        }
        h3 {
            color: #4A5568;
            margin-top: 25px;
        }
        .highlight {
            background-color: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #38A169;
            margin: 15px 0;
            border-radius: 5px;
        }
        .use-case {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #38A169;
        }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            background: #f0f8ff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3182CE;
        }
        .feature-list li:before {
            content: "âœ… ";
            font-weight: bold;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .panel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .panel-card {
            background: white;
            border: 2px solid #E53E3E;
            border-radius: 8px;
            padding: 20px;
        }
        .panel-card h4 {
            color: #E53E3E;
            margin: 0 0 15px 0;
            text-align: center;
        }
        .status-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .status-step {
            text-align: center;
            flex: 1;
        }
        .status-step .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .page-break {
            page-break-before: always;
        }
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ½ï¸ Sistema de MenÃº Interactivo</h1>
        <h2>SecciÃ³n 2: Funcionalidades y Casos de Uso</h2>

        <h2>ğŸ“‹ Requerimientos del Sistema</h2>
        
        <h3>Requerimientos Funcionales</h3>
        
        <h4>RF1 - GestiÃ³n de Usuarios</h4>
        <ul class="feature-list">
            <li>Sistema de autenticaciÃ³n por roles</li>
            <li>Registro de usuarios (cliente, mesero, cocinero, administrador)</li>
            <li>Control de acceso a diferentes paneles</li>
            <li>GestiÃ³n de perfiles de usuario</li>
        </ul>

        <h4>RF2 - GestiÃ³n de Platillos</h4>
        <ul class="feature-list">
            <li>CRUD completo de platillos</li>
            <li>CategorizaciÃ³n de platillos</li>
            <li>GestiÃ³n de imÃ¡genes</li>
            <li>Control de disponibilidad</li>
            <li>BÃºsqueda y filtrado</li>
        </ul>

        <h4>RF3 - Sistema de Pedidos</h4>
        <ul class="feature-list">
            <li>CreaciÃ³n de pedidos</li>
            <li>Flujo de estados (pendiente â†’ pagado â†’ en preparaciÃ³n â†’ listo â†’ entregado)</li>
            <li>GestiÃ³n de detalles de pedido</li>
            <li>CÃ¡lculo automÃ¡tico de totales</li>
            <li>Historial de pedidos</li>
        </ul>

        <h4>RF4 - Carrito de Compras</h4>
        <ul class="feature-list">
            <li>Agregar/quitar productos</li>
            <li>Control de cantidades</li>
            <li>Persistencia durante la sesiÃ³n</li>
            <li>CÃ¡lculo de totales</li>
            <li>Vaciar carrito</li>
        </ul>

        <h4>RF5 - Paneles Especializados</h4>
        <ul class="feature-list">
            <li>Panel de AdministraciÃ³n (gestiÃ³n completa)</li>
            <li>Panel de Mesero (gestiÃ³n de pedidos y pagos)</li>
            <li>Panel de Cocina (preparaciÃ³n de pedidos)</li>
            <li>Dashboard con estadÃ­sticas</li>
        </ul>

        <h3>Requerimientos No Funcionales</h3>
        
        <h4>RNF1 - Rendimiento</h4>
        <ul class="feature-list">
            <li>Respuesta rÃ¡pida de la API (< 2 segundos)</li>
            <li>Interfaz responsiva para diferentes dispositivos</li>
            <li>OptimizaciÃ³n de consultas a base de datos</li>
        </ul>

        <h4>RNF2 - Seguridad</h4>
        <ul class="feature-list">
            <li>ValidaciÃ³n de datos en frontend y backend</li>
            <li>Control de acceso por roles</li>
            <li>SanitizaciÃ³n de entradas</li>
            <li>ConfiguraciÃ³n de CORS</li>
        </ul>

        <h4>RNF3 - Usabilidad</h4>
        <ul class="feature-list">
            <li>Interfaz intuitiva y moderna</li>
            <li>NavegaciÃ³n clara</li>
            <li>Feedback visual para acciones</li>
            <li>DiseÃ±o responsivo</li>
        </ul>

        <h2>ğŸ“ Casos de Uso</h2>

        <div class="use-case">
            <h3>CU1 - Cliente hace pedido</h3>
            <p><strong>Actor:</strong> Cliente</p>
            <p><strong>PrecondiciÃ³n:</strong> Cliente accede al menÃº</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Cliente navega al menÃº</li>
                <li>Cliente selecciona platillos</li>
                <li>Cliente agrega al carrito</li>
                <li>Cliente confirma pedido</li>
                <li>Sistema crea pedido</li>
            </ol>
            <p><strong>PostcondiciÃ³n:</strong> Pedido creado en estado "pendiente"</p>
        </div>

        <div class="use-case">
            <h3>CU2 - Mesero gestiona pedido</h3>
            <p><strong>Actor:</strong> Mesero</p>
            <p><strong>PrecondiciÃ³n:</strong> Existe pedido pendiente</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Mesero ve pedidos pendientes</li>
                <li>Mesero registra pago</li>
                <li>Mesero envÃ­a a cocina</li>
                <li>Mesero entrega pedido</li>
            </ol>
            <p><strong>PostcondiciÃ³n:</strong> Pedido marcado como "entregado"</p>
        </div>

        <div class="use-case">
            <h3>CU3 - Cocinero prepara pedido</h3>
            <p><strong>Actor:</strong> Cocinero</p>
            <p><strong>PrecondiciÃ³n:</strong> Pedido en estado "en preparaciÃ³n"</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Cocinero ve pedidos pendientes</li>
                <li>Cocinero prepara platillos</li>
                <li>Cocinero marca como listo</li>
            </ol>
            <p><strong>PostcondiciÃ³n:</strong> Pedido marcado como "listo"</p>
        </div>

        <div class="use-case">
            <h3>CU4 - Administrador gestiona sistema</h3>
            <p><strong>Actor:</strong> Administrador</p>
            <p><strong>PrecondiciÃ³n:</strong> Usuario autenticado como administrador</p>
            <p><strong>Flujo Principal:</strong></p>
            <ol>
                <li>Administrador accede al panel</li>
                <li>Administrador gestiona platillos/usuarios/categorÃ­as</li>
                <li>Administrador ve estadÃ­sticas</li>
            </ol>
            <p><strong>PostcondiciÃ³n:</strong> Cambios aplicados al sistema</p>
        </div>

        <h2>ğŸ½ï¸ Funcionalidades Implementadas</h2>

        <h3>GestiÃ³n de Platillos</h3>
        <div class="highlight">
            <h4>CaracterÃ­sticas de TarjetaPlatillo.jsx (104 lÃ­neas)</h4>
            <ul>
                <li>âœ… Imagen con fallback a Ã­cono</li>
                <li>âœ… InformaciÃ³n completa (nombre, precio, descripciÃ³n)</li>
                <li>âœ… AnimaciÃ³n de entrada con Framer Motion</li>
                <li>âœ… Efecto hover con transformaciÃ³n</li>
                <li>âœ… BotÃ³n de agregar al carrito</li>
                <li>âœ… Manejo de errores de imagen</li>
                <li>âœ… Tooltip informativo</li>
            </ul>
        </div>

        <h4>Operaciones CRUD Completas</h4>
        <ul class="feature-list">
            <li><strong>CREATE:</strong> Agregar nuevos platillos con imagen</li>
            <li><strong>READ:</strong> Listar todos los platillos por categorÃ­a</li>
            <li><strong>UPDATE:</strong> Editar informaciÃ³n existente</li>
            <li><strong>DELETE:</strong> Eliminar platillos del sistema</li>
        </ul>

        <h3>ğŸ›’ Sistema de Carrito (CarritoContext.jsx - 81 lÃ­neas)</h3>
        <div class="highlight">
            <h4>Funcionalidades Avanzadas</h4>
            <ul>
                <li>âœ… Estado global con Context API</li>
                <li>âœ… Agregar/quitar items</li>
                <li>âœ… Control de cantidades</li>
                <li>âœ… CÃ¡lculo automÃ¡tico de totales</li>
                <li>âœ… Persistencia durante la sesiÃ³n</li>
                <li>âœ… ValidaciÃ³n de precios</li>
                <li>âœ… Logs detallados para debugging</li>
            </ul>
        </div>

        <h4>Flujo de Compra</h4>
        <ol>
            <li><strong>SelecciÃ³n:</strong> Cliente agrega platillos al carrito</li>
            <li><strong>RevisiÃ³n:</strong> Ve el resumen en pÃ¡gina de carrito</li>
            <li><strong>ConfirmaciÃ³n:</strong> EnvÃ­a pedido al backend</li>
            <li><strong>Procesamiento:</strong> Sistema crea pedido en base de datos</li>
            <li><strong>NotificaciÃ³n:</strong> Confirma recepciÃ³n del pedido</li>
        </ol>

        <h3>ğŸ“‹ Sistema de Pedidos (pedido_controlador.py - 123 lÃ­neas)</h3>
        
        <h4>Estados del Pedido</h4>
        <div class="status-flow">
            <div class="status-step">
                <div class="icon">ğŸ”„</div>
                <div>pendiente</div>
            </div>
            <div class="status-step">
                <div class="icon">ğŸ’³</div>
                <div>pagado</div>
            </div>
            <div class="status-step">
                <div class="icon">ğŸ‘¨â€ğŸ³</div>
                <div>en preparaciÃ³n</div>
            </div>
            <div class="status-step">
                <div class="icon">âœ…</div>
                <div>listo</div>
            </div>
            <div class="status-step">
                <div class="icon">ğŸ¯</div>
                <div>entregado</div>
            </div>
        </div>

        <h4>Endpoints Implementados</h4>
        <div class="code-block">
GET /pedidos/ - Listar todos los pedidos
GET /pedidos/pendientes - Pedidos por procesar
GET /pedidos/en-preparacion - Pedidos en cocina
PATCH /pedidos/{id}/estado - Cambiar estado
POST /pedidos/nuevo_pedido - Crear nuevo pedido
POST /pedidos/transacciones - Registrar pago
        </div>

        <h2>ğŸ‘¥ Sistema de Roles y Paneles</h2>

        <div class="panel-grid">
            <div class="panel-card">
                <h4>ğŸ‘¨â€ğŸ’» Panel de AdministraciÃ³n (537 lÃ­neas)</h4>
                <ul>
                    <li>âœ… GestiÃ³n completa de platillos</li>
                    <li>âœ… GestiÃ³n de usuarios y roles</li>
                    <li>âœ… GestiÃ³n de categorÃ­as</li>
                    <li>âœ… VisualizaciÃ³n de estadÃ­sticas</li>
                    <li>âœ… Subida de imÃ¡genes</li>
                    <li>âœ… ValidaciÃ³n de formularios</li>
                    <li>âœ… Modales de confirmaciÃ³n</li>
                </ul>
            </div>

            <div class="panel-card">
                <h4>ğŸ‘¨â€ğŸ’¼ Panel de Mesero (286 lÃ­neas)</h4>
                <ul>
                    <li>âœ… Ver pedidos pendientes</li>
                    <li>âœ… Registrar pagos</li>
                    <li>âœ… Cambiar estados de pedidos</li>
                    <li>âœ… Gestionar entregas</li>
                    <li>âœ… ComunicaciÃ³n con cocina</li>
                </ul>
            </div>

            <div class="panel-card">
                <h4>ğŸ‘¨â€ğŸ³ Panel de Cocina (173 lÃ­neas)</h4>
                <ul>
                    <li>âœ… Ver pedidos en preparaciÃ³n</li>
                    <li>âœ… Marcar platillos como listos</li>
                    <li>âœ… Ver detalles de preparaciÃ³n</li>
                    <li>âœ… GestiÃ³n de prioridades</li>
                </ul>
            </div>
        </div>

        <div class="page-break"></div>

        <h2>ğŸ“Š Diagramas del Sistema</h2>

        <h3>Diagrama de Clases</h3>

        <h4>Clase Usuario</h4>
        <div class="code-block">
class Usuario:
    - id_usuario: int
    - nombre: string
    - correo: string
    - contraseÃ±a: string
    - rol: enum
    + autenticar()
    + cambiar_rol()
        </div>

        <h4>Clase Platillo</h4>
        <div class="code-block">
class Platillo:
    - id_platillo: int
    - nombre: string
    - descripcion: text
    - precio: decimal
    - imagen: string
    - estado: enum
    - id_categoria: int
    + cambiar_estado()
    + actualizar_precio()
        </div>

        <h4>Clase Pedido</h4>
        <div class="code-block">
class Pedido:
    - id_pedido: int
    - id_cliente: int
    - id_mesero: int
    - estado: enum
    - fecha_hora: datetime
    + cambiar_estado()
    + calcular_total()
        </div>

        <h4>Clase DetallePedido</h4>
        <div class="code-block">
class DetallePedido:
    - id_detalle: int
    - id_pedido: int
    - id_platillo: int
    - cantidad: int
    - precio_unitario: decimal
    + calcular_subtotal()
        </div>

        <h3>Diagrama de Paquetes</h3>
        <div class="flow-diagram">
menu_interactivo/
â”œâ”€â”€ ğŸ“¦ frontend/
â”‚   â”œâ”€â”€ ğŸ“¦ src/
â”‚   â”‚   â”œâ”€â”€ componentes/
â”‚   â”‚   â”œâ”€â”€ paginas/
â”‚   â”‚   â”œâ”€â”€ ğŸ“¦ contexto/
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â””â”€â”€ ğŸ“¦ public/
â”œâ”€â”€ ğŸ“¦ backend/
â”‚   â”œâ”€â”€ controladores/
â”‚   â”œâ”€â”€ ğŸ“¦ modelos/
â”‚   â”œâ”€â”€ static/
â”‚   â””â”€â”€ ğŸ“¦ __pycache__/
â””â”€â”€ docs/
        </div>

        <h3>Diagrama de Componentes</h3>

        <h4>Frontend Components:</h4>
        <ul class="feature-list">
            <li><strong>App.jsx:</strong> Componente raÃ­z con enrutamiento</li>
            <li><strong>Plantilla.jsx:</strong> Layout principal</li>
            <li><strong>TarjetaPlatillo.jsx:</strong> VisualizaciÃ³n de platillos</li>
            <li><strong>CarritoContext.jsx:</strong> Estado global del carrito</li>
            <li><strong>RutaProtegida.jsx:</strong> Control de acceso</li>
        </ul>

        <h4>Backend Components:</h4>
        <ul class="feature-list">
            <li><strong>app.py:</strong> Servidor principal Flask</li>
            <li><strong>controladores/:</strong> LÃ³gica de negocio</li>
            <li><strong>modelos/:</strong> Acceso a datos</li>
            <li><strong>conexion.py:</strong> ConfiguraciÃ³n de BD</li>
        </ul>

        <h2>ğŸ”’ Seguridad y Validaciones</h2>

        <h3>Medidas de Seguridad Implementadas</h3>

        <h4>AutenticaciÃ³n y AutorizaciÃ³n</h4>
        <div class="code-block">
// RutaProtegida.jsx - Control de acceso
const RutaProtegida = ({ rolPermitido, children }) => {
  const rol = localStorage.getItem('rol');
  return rol === rolPermitido ? children : <Navigate to="/login" />;
};
        </div>

        <h4>ValidaciÃ³n de Datos</h4>
        <div class="code-block">
# Backend - ValidaciÃ³n de entrada
def crear_platillo():
    nombre = request.form.get('nombre')
    if not nombre:
        return jsonify({"error": "Nombre requerido"}), 400
        </div>

        <h4>CORS Configurado</h4>
        <div class="code-block">
# app.py - ConfiguraciÃ³n de seguridad
CORS(app, 
     origins=["http://localhost:5173"],
     methods=["GET", "POST", "PUT", "DELETE"],
     allow_headers=["Content-Type", "Authorization"])
        </div>

        <h3>Validaciones Implementadas</h3>

        <h4>Frontend</h4>
        <ul class="feature-list">
            <li>âœ… ValidaciÃ³n de formularios</li>
            <li>âœ… Control de tipos de datos</li>
            <li>âœ… Manejo de errores de red</li>
            <li>âœ… ValidaciÃ³n de archivos de imagen</li>
        </ul>

        <h4>Backend</h4>
        <ul class="feature-list">
            <li>âœ… ValidaciÃ³n de datos de entrada</li>
            <li>âœ… SanitizaciÃ³n de strings</li>
            <li>âœ… VerificaciÃ³n de permisos</li>
            <li>âœ… Manejo de excepciones</li>
        </ul>

        <div class="highlight">
            <h3>ğŸ“‹ Resumen de la SecciÃ³n 2</h3>
            <p>Esta secciÃ³n detalla las funcionalidades implementadas, casos de uso del sistema, diagramas de clases y componentes, asÃ­ como las medidas de seguridad implementadas. El sistema cuenta con un flujo completo de pedidos, gestiÃ³n de roles especializada y validaciones robustas tanto en frontend como backend.</p>
        </div>
    </div>
</body>
</html> 